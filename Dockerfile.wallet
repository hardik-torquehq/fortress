
FROM golang:1.18.4-alpine3.16 
WORKDIR /app
COPY . .
RUN go build -o wallet main.go 

ARG WALLET_ENGINE_PORT
ARG BLOCKCHAIN_SERVER_IP
ARG BLOCKCHAIN_SERVER_PORT
EXPOSE ${WALLET_ENGINE_PORT} 

CMD ["go", "run", "." , "-port", ${WALLET_ENGINE_PORT}, "-gateway", "http://${BLOCKCHAIN_SERVER_IP}:${BLOCKCHAIN_SERVER_PORT}" ] 
